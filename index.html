<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Magic Ball</title>
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.0/dist/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            position: relative;
        }

        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid white;
            border-radius: 20px;
            background: transparent;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .lang-btn:hover {
            background: white;
            color: #1a2a6c;
        }

        .lang-btn.active {
            background: white;
            color: #1a2a6c;
        }

        .title {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #ff0080;
            animation: glow 2s ease-in-out infinite alternate;
        }

        .subtitle {
            font-size: 1.5em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            .title {
                font-size: 2em;
            }
        }

        .ar-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        #ar-scene {
            width: 100%;
            height: 500px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            background: rgba(0, 0, 0, 0.3);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .instructions h2 {
            color: #ffeb3b;
            margin-bottom: 20px;
            text-align: center;
        }

        .step {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }

        .step-number {
            background: #ff0080;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .wishes {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
        }

        .wish-item {
            background: linear-gradient(45deg, rgba(255, 0, 128, 0.3), rgba(0, 255, 255, 0.3));
            padding: 20px;
            margin: 15px 0;
            border-radius: 15px;
            border-left: 5px solid #ff0080;
            animation: float 3s ease-in-out infinite;
        }

        .wish-item:nth-child(even) {
            animation-delay: 1.5s;
            border-left-color: #00ffff;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.5em;
        }

        .control-panel {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff0080, #00ffff);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.1);
        }

        .movement-instructions {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 20px #ff0080;
            }
            to {
                text-shadow: 0 0 30px #00ffff, 0 0 40px #ff0080;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="language-switcher">
                <button class="lang-btn active" onclick="switchLanguage('en')">EN</button>
                <button class="lang-btn" onclick="switchLanguage('uk')">UK</button>
            </div>
            
            <!-- English Content -->
            <div id="en-content">
                <h1 class="title">üéÑ Christmas Magic Ball ‚ú®</h1>
                <p class="subtitle">Place the marker on the floor and walk around the magic ball!</p>
            </div>
            
            <!-- Ukrainian Content -->
            <div id="uk-content" class="hidden">
                <h1 class="title">üéÑ –†—ñ–∑–¥–≤—è–Ω–∞ –ú–∞–≥—ñ—á–Ω–∞ –ö—É–ª—è ‚ú®</h1>
                <p class="subtitle">–ü–æ–∫–ª–∞–¥–∏ –º–∞—Ä–∫–µ—Ä –Ω–∞ –ø—ñ–¥–ª–æ–≥—É —Ç–∞ –æ–±—ñ–¥–∏ –º–∞–≥—ñ—á–Ω—É –∫—É–ª—é –Ω–∞–≤–∫–æ–ª–æ!</p>
            </div>
        </header>

        <div class="content">
            <div class="ar-section">
                <div id="ar-scene">
                    <!-- English Loading -->
                    <div id="en-loading" class="loading">
                        <p>üîÑ Loading magic...</p>
                        <p>Click "Start AR" and allow camera access</p>
                    </div>
                    
                    <!-- Ukrainian Loading -->
                    <div id="uk-loading" class="loading hidden">
                        <p>üîÑ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞–≥—ñ—ó...</p>
                        <p>–ù–∞—Ç–∏—Å–Ω–∏ "–°—Ç–∞—Ä—Ç AR" —Ç–∞ –¥–∞–π –¥–æ—Å—Ç—É–ø –¥–æ –∫–∞–º–µ—Ä–∏</p>
                    </div>
                </div>
                
                <!-- English Movement Instructions -->
                <div id="en-movement" class="movement-instructions">
                    <p>üéÆ <strong>Controls:</strong></p>
                    <p>üì± <strong>Mobile:</strong> Move your device around the marker</p>
                    <p>üíª <strong>Computer:</strong> Mouse to look around</p>
                </div>
                
                <!-- Ukrainian Movement Instructions -->
                <div id="uk-movement" class="movement-instructions hidden">
                    <p>üéÆ <strong>–ö–µ—Ä—É–≤–∞–Ω–Ω—è:</strong></p>
                    <p>üì± <strong>–ú–æ–±—ñ–ª—å–Ω–∏–π:</strong> –†—É—Ö–∞–π –ø—Ä–∏—Å—Ç—Ä—ñ–π –Ω–∞–≤–∫–æ–ª–æ –º–∞—Ä–∫–µ—Ä–∞</p>
                    <p>üíª <strong>–ö–æ–º–ø'—é—Ç–µ—Ä:</strong> –ú–∏—à–∞ –¥–ª—è –æ–≥–ª—è–¥—É</p>
                </div>
                
                <div class="control-panel">
                    <!-- English Buttons -->
                    <div id="en-buttons">
                        <button class="btn" onclick="startAR()">‚ñ∂Ô∏è Start AR</button>
                        <button class="btn" onclick="stopAR()">‚èπÔ∏è Stop AR</button>
                        <button class="btn" onclick="toggleSound()">üîä Sound</button>
                    </div>
                    
                    <!-- Ukrainian Buttons -->
                    <div id="uk-buttons" class="hidden">
                        <button class="btn" onclick="startAR()">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç AR</button>
                        <button class="btn" onclick="stopAR()">‚èπÔ∏è –°—Ç–æ–ø AR</button>
                        <button class="btn" onclick="toggleSound()">üîä –ó–≤—É–∫</button>
                    </div>
                </div>
            </div>

            <div class="instructions">
                <!-- English Instructions -->
                <div id="en-instructions">
                    <h2>üìñ How to explore the ball:</h2>
                    <div class="step">
                        <div class="step-number">1</div>
                        <p>Click "Start AR" and allow camera access</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <p>Point camera at the marker (marker.mind)</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <p>See the magic ball with Christmas wishes</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <p>Click on the ball - get a new wish!</p>
                    </div>
                </div>
                
                <!-- Ukrainian Instructions -->
                <div id="uk-instructions" class="hidden">
                    <h2>üìñ –Ø–∫ –¥–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏ –∫—É–ª—é:</h2>
                    <div class="step">
                        <div class="step-number">1</div>
                        <p>–ù–∞—Ç–∏—Å–Ω–∏ "–°—Ç–∞—Ä—Ç AR" —Ç–∞ –¥–∞–π –¥–æ–∑–≤—ñ–ª –Ω–∞ –∫–∞–º–µ—Ä—É</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <p>–ù–∞–≤–µ–¥–∏ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä (marker.mind)</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <p>–ü–æ–±–∞—á–∏—à –º–∞–≥—ñ—á–Ω—É –∫—É–ª—é –∑ —Ä—ñ–∑–¥–≤—è–Ω–∏–º–∏ –ø–æ–±–∞–∂–∞–Ω–Ω—è–º–∏</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <p>–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –∫—É–ª—é - –æ—Ç—Ä–∏–º–∞–π –Ω–æ–≤–µ –ø–æ–±–∞–∂–∞–Ω–Ω—è!</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="wishes">
            <!-- English Wishes -->
            <div id="en-wishes">
                <h2 style="text-align: center; color: #ffeb3b; margin-bottom: 20px;">
                    üåü Christmas Wishes for You!
                </h2>
                <div class="wish-item">
                    <p>May your eyes shine with joy this Christmas, and your heart fill with wonder at every festive moment!</p>
                </div>
                <div class="wish-item">
                    <p>I wish you the most magical gifts under the Christmas tree, and may Santa bring you dreams that come true!</p>
                </div>
                <div class="wish-item">
                    <p>May the Christmas star light your path to exciting adventures and new friends in the coming year!</p>
                </div>
                <div class="wish-item">
                    <p>May every snowflake bring you a bit of magic, and every Christmas song teach you to sing with happiness!</p>
                </div>
                <div class="wish-item">
                    <p>I wish these holidays fill your home with laughter, family warmth, and the aroma of homemade cookies!</p>
                </div>
            </div>
            
            <!-- Ukrainian Wishes -->
            <div id="uk-wishes" class="hidden">
                <h2 style="text-align: center; color: #ffeb3b; margin-bottom: 20px;">
                    üåü –†—ñ–∑–¥–≤—è–Ω—ñ –ü–æ–±–∞–∂–∞–Ω–Ω—è –¥–ª—è –¢–µ–±–µ!
                </h2>
                <div class="wish-item">
                    <p>–ù–µ—Ö–∞–π —Ü—å–æ–≥–æ –†—ñ–∑–¥–≤–∞ —Ç–≤–æ—ó –æ—á—ñ —Å—è—é—Ç—å –≤—ñ–¥ —Ä–∞–¥–æ—â—ñ–≤, –∞ —Å–µ—Ä—Ü–µ –Ω–∞–ø–æ–≤–Ω–∏—Ç—å—Å—è –¥–∏–≤—É–≤–∞–Ω–Ω—è–º –≤—ñ–¥ –∫–æ–∂–Ω–æ–≥–æ —Å–≤—è—Ç–∫–æ–≤–æ–≥–æ –º–æ–º–µ–Ω—Ç—É!</p>
                </div>
                <div class="wish-item">
                    <p>–ë–∞–∂–∞—é, —â–æ–± –ø—ñ–¥ —è–ª–∏–Ω–∫–æ—é —Ç–µ–±–µ —á–µ–∫–∞–ª–∏ –Ω–∞–π—á–∞—Ä—ñ–≤–Ω—ñ—à—ñ –ø–æ–¥–∞—Ä—É–Ω–∫–∏, –∞ –î—ñ–¥ –ú–æ—Ä–æ–∑ –ø—Ä–∏–Ω—ñ—Å –º—Ä—ñ—ó, —è–∫—ñ –∑–±—É–≤–∞—é—Ç—å—Å—è!</p>
                </div>
                <div class="wish-item">
                    <p>–•–∞–π —Ä—ñ–∑–¥–≤—è–Ω–∞ –∑—ñ—Ä–∫–∞ –æ—Å–≤—ñ—Ç–∏—Ç—å —Ç–≤—ñ–π —à–ª—è—Ö –¥–æ —Ü—ñ–∫–∞–≤–∏—Ö –ø—Ä–∏–≥–æ–¥ —ñ –Ω–æ–≤–∏—Ö –¥—Ä—É–∑—ñ–≤ —É –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ—Ü—ñ!</p>
                </div>
                <div class="wish-item">
                    <p>–ù–µ—Ö–∞–π –∫–æ–∂–Ω–∞ —Å–Ω—ñ–∂–∏–Ω–∫–∞ –ø—Ä–∏–Ω–µ—Å–µ —Ç–æ–±—ñ —Ç—Ä–æ—Ö–∏ –º–∞–≥—ñ—ó, –∞ –∫–æ–∂–Ω–∞ —Ä—ñ–∑–¥–≤—è–Ω–∞ –ø—ñ—Å–Ω—è –Ω–∞–≤—á–∏—Ç—å —Å–ø—ñ–≤–∞—Ç–∏ –≤—ñ–¥ —â–∞—Å—Ç—è!</p>
                </div>
                <div class="wish-item">
                    <p>–ë–∞–∂–∞—é, —â–æ–± —Ü—ñ —Å–≤—è—Ç–∞ –Ω–∞–ø–æ–≤–Ω–∏–ª–∏ —Ç–≤—ñ–π –¥—ñ–º —Å–º—ñ—Ö–æ–º, —Ç–µ–ø–ª–æ–º —Ä–æ–¥–∏–Ω–∏ —Ç–∞ –∞—Ä–æ–º–∞—Ç–æ–º –¥–æ–º–∞—à–Ω—ñ—Ö –ø–µ—á–∏–≤!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'en';
        let currentScene = null;
        let isSoundOn = false;
        let mainAudio = null;
        let currentWishIndex = 0;

        const wishes = {
            en: [
                "May your eyes shine with joy this Christmas, and your heart fill with wonder at every festive moment!",
                "I wish you the most magical gifts under the Christmas tree, and may Santa bring you dreams that come true!",
                "May the Christmas star light your path to exciting adventures and new friends in the coming year!",
                "May every snowflake bring you a bit of magic, and every Christmas song teach you to sing with happiness!",
                "I wish these holidays fill your home with laughter, family warmth, and the aroma of homemade cookies!"
            ],
            uk: [
                "–ù–µ—Ö–∞–π —Ü—å–æ–≥–æ –†—ñ–∑–¥–≤–∞ —Ç–≤–æ—ó –æ—á—ñ —Å—è—é—Ç—å –≤—ñ–¥ —Ä–∞–¥–æ—â—ñ–≤, –∞ —Å–µ—Ä—Ü–µ –Ω–∞–ø–æ–≤–Ω–∏—Ç—å—Å—è –¥–∏–≤—É–≤–∞–Ω–Ω—è–º –≤—ñ–¥ –∫–æ–∂–Ω–æ–≥–æ —Å–≤—è—Ç–∫–æ–≤–æ–≥–æ –º–æ–º–µ–Ω—Ç—É!",
                "–ë–∞–∂–∞—é, —â–æ–± –ø—ñ–¥ —è–ª–∏–Ω–∫–æ—é —Ç–µ–±–µ —á–µ–∫–∞–ª–∏ –Ω–∞–π—á–∞—Ä—ñ–≤–Ω—ñ—à—ñ –ø–æ–¥–∞—Ä—É–Ω–∫–∏, –∞ –î—ñ–¥ –ú–æ—Ä–æ–∑ –ø—Ä–∏–Ω—ñ—Å –º—Ä—ñ—ó, —è–∫—ñ –∑–±—É–≤–∞—é—Ç—å—Å—è!",
                "–•–∞–π —Ä—ñ–∑–¥–≤—è–Ω–∞ –∑—ñ—Ä–∫–∞ –æ—Å–≤—ñ—Ç–∏—Ç—å —Ç–≤—ñ–π —à–ª—è—Ö –¥–æ —Ü—ñ–∫–∞–≤–∏—Ö –ø—Ä–∏–≥–æ–¥ —ñ –Ω–æ–≤–∏—Ö –¥—Ä—É–∑—ñ–≤ —É –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ—Ü—ñ!",
                "–ù–µ—Ö–∞–π –∫–æ–∂–Ω–∞ —Å–Ω—ñ–∂–∏–Ω–∫–∞ –ø—Ä–∏–Ω–µ—Å–µ —Ç–æ–±—ñ —Ç—Ä–æ—Ö–∏ –º–∞–≥—ñ—ó, –∞ –∫–æ–∂–Ω–∞ —Ä—ñ–∑–¥–≤—è–Ω–∞ –ø—ñ—Å–Ω—è –Ω–∞–≤—á–∏—Ç—å —Å–ø—ñ–≤–∞—Ç–∏ –≤—ñ–¥ —â–∞—Å—Ç—è!",
                "–ë–∞–∂–∞—é, —â–æ–± —Ü—ñ —Å–≤—è—Ç–∞ –Ω–∞–ø–æ–≤–Ω–∏–ª–∏ —Ç–≤—ñ–π –¥—ñ–º —Å–º—ñ—Ö–æ–º, —Ç–µ–ø–ª–æ–º —Ä–æ–¥–∏–Ω–∏ —Ç–∞ –∞—Ä–æ–º–∞—Ç–æ–º –¥–æ–º–∞—à–Ω—ñ—Ö –ø–µ—á–∏–≤!"
            ]
        };

        const startTexts = {
            en: "Click on the ball!",
            uk: "–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –∫—É–ª—é!"
        };

        function switchLanguage(lang) {
            currentLanguage = lang;
            
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.lang-btn[onclick="switchLanguage('${lang}')"]`).classList.add('active');
            
            const sections = ['content', 'loading', 'movement', 'buttons', 'instructions', 'wishes'];
            sections.forEach(section => {
                document.querySelectorAll(`[id$="-${section}"]`).forEach(el => el.classList.add('hidden'));
                document.getElementById(`${lang}-${section}`).classList.remove('hidden');
            });

            if (currentScene) {
                updateARStartText();
            }
        }

        function initAudio() {
            if (!mainAudio) {
                mainAudio = new Audio('fon.mp3');
                mainAudio.loop = true;
            }
        }

        function toggleSound() {
            initAudio();
            isSoundOn = !isSoundOn;
            if (isSoundOn) {
                mainAudio.play().catch(e => console.warn("Audio play failed (needs user gesture):", e));
            } else {
                mainAudio.pause();
            }
        }

        function showWish(target) {
            // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä–∏–π —Ç–µ–∫—Å—Ç —Ç–∞ —Ñ–æ–Ω
            const oldText = target.querySelector('.wish-text');
            const oldBg = target.querySelector('.wish-bg');
            if (oldText) target.removeChild(oldText);
            if (oldBg) target.removeChild(oldBg);

            const wishText = document.createElement('a-text');
            wishText.classList.add('wish-text');
            wishText.setAttribute('value', wishes[currentLanguage][currentWishIndex]);
            wishText.setAttribute('color', '#FFD700');
            wishText.setAttribute('align', 'center');
            wishText.setAttribute('position', '0 1.2 0');
            wishText.setAttribute('width', '3');

            const textBg = document.createElement('a-plane');
            textBg.classList.add('wish-bg');
            textBg.setAttribute('position', '0 1.2 0');
            textBg.setAttribute('width', '3.2');
            textBg.setAttribute('height', '0.8');
            textBg.setAttribute('color', '#000000');
            textBg.setAttribute('opacity', '0.7');

            target.appendChild(textBg);
            target.appendChild(wishText);

            currentWishIndex = (currentWishIndex + 1) % wishes[currentLanguage].length;
        }

        function updateARStartText() {
            if (!currentScene) return;
            const target = currentScene.querySelector('[mindar-image-target]');
            if (!target) return;
            const startTextEl = target.querySelector('.start-text');
            if (startTextEl) {
                startTextEl.setAttribute('value', startTexts[currentLanguage]);
            }
        }

        function startAR() {
            if (!window.MindAR || !AFRAME) {
                alert(currentLanguage === 'en' 
                    ? 'Error: MindAR or A-Frame not loaded.'
                    : '–ü–æ–º–∏–ª–∫–∞: MindAR –∞–±–æ A-Frame –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ.');
                return;
            }

            const arContainer = document.getElementById('ar-scene');
            arContainer.innerHTML = '';

            const mindarEl = document.createElement('a-mindar-image');
            mindarEl.setAttribute('imageTargetSrc', 'assets/marker.mind');
            mindarEl.setAttribute('maxTrack', '1');
            mindarEl.setAttribute('autoStart', 'true');
            mindarEl.setAttribute('embedded', '');
            mindarEl.setAttribute('renderer', 'colorManagement: true, antialias: true');
            mindarEl.setAttribute('vr-mode-ui', 'enabled: false');
            mindarEl.setAttribute('device-orientation-permission-ui', 'enabled: false');

            const camera = document.createElement('a-camera');
            camera.setAttribute('position', '0 0 0');
            camera.setAttribute('look-controls', 'enabled: true');
            mindarEl.appendChild(camera);

            const target = document.createElement('a-entity');
            target.setAttribute('mindar-image-target', 'targetIndex: 0');

            // Magic Ball
            const sphere = document.createElement('a-sphere');
            sphere.setAttribute('radius', '0.5');
            sphere.setAttribute('color', '#ff0080');
            sphere.setAttribute('transparent', 'true');
            sphere.setAttribute('opacity', '0.8');
            sphere.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 10000');

            const innerCube = document.createElement('a-box');
            innerCube.setAttribute('width', '0.8');
            innerCube.setAttribute('height', '0.8');
            innerCube.setAttribute('depth', '0.8');
            innerCube.setAttribute('color', '#00ffff');
            innerCube.setAttribute('transparent', 'true');
            innerCube.setAttribute('opacity', '0.4');
            innerCube.setAttribute('animation', 'property: rotation; to: 360 360 0; loop: true; dur: 8000');

            const ring = document.createElement('a-torus');
            ring.setAttribute('radius', '0.7');
            ring.setAttribute('radius-tubular', '0.05');
            ring.setAttribute('color', '#ffff00');
            ring.setAttribute('animation', 'property: rotation; to: 0 0 360; loop: true; dur: 12000');

            target.appendChild(sphere);
            target.appendChild(innerCube);
            target.appendChild(ring);

            // Start text
            const startText = document.createElement('a-text');
            startText.classList.add('start-text');
            startText.setAttribute('value', startTexts[currentLanguage]);
            startText.setAttribute('color', '#FFFFFF');
            startText.setAttribute('align', 'center');
            startText.setAttribute('position', '0 1.2 0');
            startText.setAttribute('width', '2');
            target.appendChild(startText);

            function handleClick() {
                sphere.setAttribute('animation__scale', {
                    property: 'scale',
                    to: '1.3 1.3 1.3',
                    dur: 300,
                    dir: 'alternate'
                });

                if (isSoundOn) {
                    const clickSound = new Audio('fon.mp3');
                    clickSound.volume = 0.2;
                    clickSound.play().catch(e => console.log("Click sound failed"));
                }

                showWish(target);
            }

            sphere.addEventListener('click', handleClick);
            innerCube.addEventListener('click', handleClick);
            ring.addEventListener('click', handleClick);

            mindarEl.appendChild(target);
            arContainer.appendChild(mindarEl);
            currentScene = mindarEl;

            console.log('AR started!');
        }

        function stopAR() {
            const arContainer = document.getElementById('ar-scene');
            const loadingContent = currentLanguage === 'en' 
                ? '<div class="loading"><p>üîÑ AR stopped</p><p>Click "Start AR" to continue</p></div>'
                : '<div class="loading"><p>üîÑ AR –∑—É–ø–∏–Ω–µ–Ω–æ</p><p>–ù–∞—Ç–∏—Å–Ω–∏ "–°—Ç–∞—Ä—Ç AR" —â–æ–± –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</p></div>';
            arContainer.innerHTML = loadingContent;
            if (mainAudio && isSoundOn) {
                mainAudio.pause();
            }
        }
    </script>
</body>
</html>
