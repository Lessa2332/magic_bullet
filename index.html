<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR –ú–∞–≥—ñ—á–Ω–∞ –ö—É–ª—è</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            max-width: 300px;
            font-size: 14px;
        }
        
        .prophecy-text {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: #ffd700;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            z-index: 1000;
            display: none;
            max-width: 80%;
            border: 2px solid gold;
        }
        
        .ball-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffd700;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            pointer-events: none;
            z-index: 1000;
        }
        
        .audio-control {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 50%;
            z-index: 1000;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .marker-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 10px;
            z-index: 1000;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="instructions">
        <h3>AR –ú–∞–≥—ñ—á–Ω–∞ –ö—É–ª—è</h3>
        <p>1. –ù–∞–≤–µ–¥—ñ—Ç—å –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä</p>
        <p>2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫—É–ª—é –¥–ª—è –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞</p>
    </div>
    
    <div class="audio-control" onclick="toggleAudio()">üîä</div>
    <div class="marker-info">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ marker.mind</div>
    
    <div class="prophecy-text" id="prophecyText"></div>
    <div class="ball-text" id="ballText">–ù–∞—Ç–∏—Å–Ω–∏</div>

    <!-- –§–æ–Ω–æ–≤–∞ –º—É–∑–∏–∫–∞ -->
    <audio id="backgroundMusic" loop>
        <source src="assets/fon.mp3" type="audio/mpeg">
    </audio>

    <a-scene 
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        embedded
        renderer="logarithmicDepthBuffer: true;"
        cursor="rayOrigin: mouse"
        raycaster="objects: .clickable">
        
        <!-- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≤–∞—à marker.mind -->
        <a-marker type="barcode" value="5">
            <!-- –û—Å–Ω–æ–≤–Ω–∞ –∫—É–ª—è -->
            <a-sphere 
                class="clickable"
                id="magicBall"
                radius="0.5"
                position="0 1 0"
                color="#1a1a2e"
                transparent="true"
                opacity="0.9"
                metalness="0.8"
                roughness="0.2">
                
                <!-- –í–Ω—É—Ç—Ä—ñ—à–Ω—è –∫—É–ª—è -->
                <a-sphere 
                    radius="0.45"
                    color="#0f3460"
                    transparent="true"
                    opacity="0.6"
                    metalness="0.9"
                    roughness="0.1">
                </a-sphere>
                
                <!-- –ë–ª–∏—Å–∫—ñ—Ç -->
                <a-circle 
                    radius="0.5"
                    position="0.2 0.2 0.3"
                    color="#ffffff"
                    transparent="true"
                    opacity="0.3"
                    rotation="0 0 45">
                </a-circle>
                
                <!-- –ß–∞—Å—Ç–∏–Ω–∫–∏ -->
                <a-entity id="particles-container"></a-entity>
            </a-sphere>
            
            <!-- –ü—ñ–¥—Å—Ç–∞–≤–∫–∞ -->
            <a-cylinder 
                position="0 -0.6 0"
                radius="0.3"
                height="0.1"
                color="#8B4513"
                metalness="0.7"
                roughness="0.3">
            </a-cylinder>
            
            <!-- –ö—ñ–ª—å—Ü–µ -->
            <a-ring 
                position="0 -0.55 0"
                radius-inner="0.35"
                radius-outer="0.5"
                color="#daa520"
                rotation="-90 0 0">
            </a-ring>
            
            <!-- –ö—Ä–∏—Å—Ç–∞–ª–∏ -->
            <a-entity id="crystals-container"></a-entity>
        </a-marker>
        
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        const prophecies = [
            "–¢–≤–æ—î –º–∞–π–±—É—Ç–Ω—î —Å—è—î —è—Å–∫—Ä–∞–≤–æ! ‚ú®",
            "–ù–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–∞ –∑—É—Å—Ç—Ä—ñ—á –∑–º—ñ–Ω–∏—Ç—å –≤—Å–µ! üîÆ",
            "–í—ñ—Ä —É —Å–µ–±–µ - —Ç–∏ –º–æ–∂–µ—à –≤—Å–µ! üí´",
            "–ù–∞–π–∫—Ä–∞—â—ñ –º–æ–º–µ–Ω—Ç–∏ —â–µ –ø–æ–ø–µ—Ä–µ–¥—É! üåü",
            "–¢–∏ –∑–Ω–∞–π–¥–µ—à –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ! üîç",
            "–ù–æ–≤–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —á–µ–∫–∞—î –Ω–∞ —Ç–µ–±–µ! üéØ",
            "–ü–æ–¥–æ—Ä–æ–∂ –≤—ñ–¥–∫—Ä–∏—î –Ω–æ–≤—ñ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∏! üó∫Ô∏è",
            "–ù–∞–ø–æ–ª–µ–≥–ª–∏–≤—ñ—Å—Ç—å –±—É–¥–µ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∂–µ–Ω–∞! üèÜ",
            "–ó—É—Å—Ç—Ä—ñ—á –∑ –¥—Ä—É–≥–æ–º –ø—Ä–∏–Ω–µ—Å–µ —Ä–∞–¥—ñ—Å—Ç—å! üë•",
            "–¢–≤–æ—Ä—á—ñ—Å—Ç—å —Ä–æ–∑–∫—Ä–∏—î—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é! üé®",
            "–§—ñ–Ω–∞–Ω—Å–æ–≤–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á—á—è –±–ª–∏–∑—å–∫–æ! üí∞",
            "–ó–Ω–∞–π–¥–µ—à —Å–ø–æ–∫—ñ–π —Å–µ—Ä–µ–¥ —Ö–∞–æ—Å—É! ‚òÆÔ∏è",
            "–ù–æ–≤–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–æ –∑'—è–≤–∏—Ç—å—Å—è! üöÄ",
            "–î–æ–±—Ä–æ—Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ—Ç—å—Å—è –ø–æ–¥–≤—ñ–π–Ω–æ! ‚ù§Ô∏è",
            "–í—ñ–¥–∫—Ä–∏—Ç—Ç—è –∑–º—ñ–Ω–∏—Ç—å —Ç–≤—ñ–π —Å–≤—ñ—Ç! üåç"
        ];
        
        let audioEnabled = false;
        const backgroundMusic = document.getElementById('backgroundMusic');
        
        function createParticles() {
            const container = document.getElementById('particles-container');
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('a-sphere');
                particle.setAttribute('radius', '0.03');
                particle.setAttribute('color', getRandomColor());
                particle.setAttribute('position', getRandomPosition(0.6));
                particle.setAttribute('animation', {
                    property: 'position',
                    to: getRandomPosition(0.6),
                    dur: 2000 + Math.random() * 2000,
                    loop: true,
                    dir: 'alternate'
                });
                container.appendChild(particle);
            }
        }
        
        function createCrystals() {
            const container = document.getElementById('crystals-container');
            const positions = [
                {x: 0.8, y: -0.3, z: 0},
                {x: -0.8, y: -0.3, z: 0},
                {x: 0, y: -0.3, z: 0.8},
                {x: 0, y: -0.3, z: -0.8},
                {x: 0.6, y: -0.3, z: 0.6},
                {x: -0.6, y: -0.3, z: -0.6}
            ];
            
            positions.forEach(pos => {
                const crystal = document.createElement('a-cone');
                crystal.setAttribute('radius-bottom', '0.05');
                crystal.setAttribute('radius-top', '0.01');
                crystal.setAttribute('height', '0.2');
                crystal.setAttribute('color', getRandomCrystalColor());
                crystal.setAttribute('position', pos);
                crystal.setAttribute('animation', {
                    property: 'rotation',
                    to: '0 360 0',
                    dur: 4000 + Math.random() * 4000,
                    loop: true
                });
                container.appendChild(crystal);
            });
        }
        
        function getRandomColor() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function getRandomCrystalColor() {
            const colors = ['#ffd700', '#c0c0c0', '#b9f2ff', '#ff69b4', '#98fb98'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function getRandomPosition(radius) {
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            const x = radius * Math.sin(phi) * Math.cos(theta);
            const y = radius * Math.sin(phi) * Math.sin(theta);
            const z = radius * Math.cos(phi);
            return `${x} ${y} ${z}`;
        }
        
        function getRandomProphecy() {
            return prophecies[Math.floor(Math.random() * prophecies.length)];
        }
        
        function toggleAudio() {
            const audioControl = document.querySelector('.audio-control');
            if (audioEnabled) {
                backgroundMusic.pause();
                audioControl.textContent = 'üîá';
                audioEnabled = false;
            } else {
                backgroundMusic.play().catch(e => {
                    console.log('–ê–≤—Ç–æ–≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å —â–µ —Ä–∞–∑');
                });
                audioControl.textContent = 'üîä';
                audioEnabled = true;
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const magicBall = document.getElementById('magicBall');
            const ballText = document.getElementById('ballText');
            const prophecyText = document.getElementById('prophecyText');
            
            createParticles();
            createCrystals();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∫–ª—é—á–µ–Ω–Ω—è –∞—É–¥—ñ–æ –ø—Ä–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó
            document.addEventListener('click', function() {
                if (!audioEnabled) {
                    backgroundMusic.play().catch(e => {
                        console.log('–ê–≤—Ç–æ–≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ');
                    });
                }
            }, { once: true });
            
            magicBall.addEventListener('click', function() {
                // –ê–Ω—ñ–º–∞—Ü—ñ—è –∫—É–ª—ñ
                magicBall.setAttribute('animation', {
                    property: 'scale',
                    from: '1 1 1',
                    to: '1.2 1.2 1.2',
                    dur: 300,
                    loop: 2,
                    dir: 'alternate'
                });
                
                // –ó–º—ñ–Ω–∞ –∫–æ–ª—å–æ—Ä—É
                magicBall.setAttribute('color', '#4a148c');
                
                // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞
                const prophecy = getRandomProphecy();
                ballText.textContent = prophecy;
                
                // –ü–æ–∫–∞–∑ —Ç–µ–∫—Å—Ç—É –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
                prophecyText.textContent = prophecy;
                prophecyText.style.display = 'block';
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    prophecyText.style.display = 'none';
                    magicBall.setAttribute('color', '#1a1a2e');
                    ballText.textContent = "–ù–∞—Ç–∏—Å–Ω–∏";
                }, 5000);
            });
        });
    </script>
</body>
</html>
