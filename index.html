<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR –ú–∞–≥—ñ—á–Ω–∞ –ö—É–ª—è</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            max-width: 300px;
        }
        
        .prophecy-text {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: #ffd700;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            z-index: 1000;
            display: none;
            max-width: 80%;
            border: 2px solid gold;
        }
    </style>
</head>
<body>
    <div class="instructions">
        <h3>AR –ú–∞–≥—ñ—á–Ω–∞ –ö—É–ª—è</h3>
        <p>1. –ù–∞–≤–µ–¥—ñ—Ç—å –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä</p>
        <p>2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫—É–ª—é –¥–ª—è –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞</p>
        <p>–ú–∞—Ä–∫–µ—Ä: <a href="#" onclick="downloadMarker()">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–∞—Ä–∫–µ—Ä</a></p>
    </div>
    
    <div class="prophecy-text" id="prophecyText"></div>

    <a-scene 
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; debugUIEnabled: false;"
        embedded
        renderer="logarithmicDepthBuffer: true;"
        cursor="rayOrigin: mouse"
        raycaster="objects: .clickable">
        
        <!-- –ú–∞—Ä–∫–µ—Ä -->
        <a-marker type="pattern" preset="custom" url="assets/marker.patt">
            
            <!-- –û—Å–Ω–æ–≤–∞ –∫—É–ª—ñ - —Å—Ñ–µ—Ä–∞ -->
            <a-sphere 
                class="clickable"
                id="magicBall"
                radius="0.5"
                position="0 1 0"
                color="#1a1a2e"
                transparent="true"
                opacity="0.9"
                shader="standard"
                metalness="0.8"
                roughness="0.2">
                
                <!-- –í–Ω—É—Ç—Ä—ñ—à–Ω—î —Å–≤—ñ—Ç—ñ–Ω–Ω—è -->
                <a-sphere 
                    radius="0.45"
                    color="#0f3460"
                    transparent="true"
                    opacity="0.6"
                    shader="standard"
                    metalness="0.9"
                    roughness="0.1">
                </a-sphere>
                
                <!-- –ï—Ñ–µ–∫—Ç –±–ª–∏—Å–∫—ñ—Ç–∫–∏ -->
                <a-circle 
                    radius="0.5"
                    position="0.2 0.2 0.3"
                    color="#ffffff"
                    transparent="true"
                    opacity="0.3"
                    rotation="0 0 45">
                </a-circle>
                
                <!-- –ú–∞–≥—ñ—á–Ω—ñ —á–∞—Å—Ç–∏–Ω–∫–∏ –Ω–∞–≤–∫–æ–ª–æ –∫—É–ª—ñ -->
                <a-entity id="particles-container">
                    <!-- –ß–∞—Å—Ç–∏–Ω–∫–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
                </a-entity>
                
                <!-- –¢–µ–∫—Å—Ç –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞ -->
                <a-text 
                    id="prophecy"
                    value="–ù–∞—Ç–∏—Å–Ω–∏ –º–µ–Ω–µ"
                    align="center"
                    position="0 0 0.6"
                    color="#ffd700"
                    scale="2 2 2"
                    width="3">
                </a-text>
                
            </a-sphere>
            
            <!-- –ü—ñ–¥—Å—Ç–∞–≤–∫–∞ –¥–ª—è –∫—É–ª—ñ -->
            <a-cylinder 
                position="0 -0.6 0"
                radius="0.3"
                height="0.1"
                color="#8B4513"
                metalness="0.7"
                roughness="0.3">
            </a-cylinder>
            
            <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞–≤–∫–æ–ª–æ -->
            <a-ring 
                position="0 -0.55 0"
                radius-inner="0.35"
                radius-outer="0.5"
                color="#daa520"
                rotation="-90 0 0">
            </a-ring>
            
            <!-- –ú–∞–≥—ñ—á–Ω—ñ –∫—Ä–∏—Å—Ç–∞–ª–∏ –Ω–∞–≤–∫–æ–ª–æ -->
            <a-entity id="crystals-container">
                <!-- –ö—Ä–∏—Å—Ç–∞–ª–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
            </a-entity>
            
        </a-marker>
        
        <!-- –ö–∞–º–µ—Ä–∞ -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ä–æ—Ü—Ç–≤
        const prophecies = [
            "–¢–≤–æ—î –º–∞–π–±—É—Ç–Ω—î —Å—è—î —è—Å–∫—Ä–∞–≤–æ! ‚ú®",
            "–ù–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–∞ –∑—É—Å—Ç—Ä—ñ—á –∑–º—ñ–Ω–∏—Ç—å –≤—Å–µ! üîÆ",
            "–í—ñ—Ä —É —Å–µ–±–µ - —Ç–∏ –º–æ–∂–µ—à –≤—Å–µ! üí´",
            "–ù–∞–π–∫—Ä–∞—â—ñ –º–æ–º–µ–Ω—Ç–∏ —â–µ –ø–æ–ø–µ—Ä–µ–¥—É! üåü",
            "–¢–∏ –∑–Ω–∞–π–¥–µ—à –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ! üîç",
            "–ù–æ–≤–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —á–µ–∫–∞—î –Ω–∞ —Ç–µ–±–µ! üéØ",
            "–ü–æ–¥–æ—Ä–æ–∂ –≤—ñ–¥–∫—Ä–∏—î –Ω–æ–≤—ñ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∏! üó∫Ô∏è",
            "–ù–∞–ø–æ–ª–µ–≥–ª–∏–≤—ñ—Å—Ç—å –±—É–¥–µ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∂–µ–Ω–∞! üèÜ",
            "–ó—É—Å—Ç—Ä—ñ—á –∑ –¥—Ä—É–≥–æ–º –ø—Ä–∏–Ω–µ—Å–µ —Ä–∞–¥—ñ—Å—Ç—å! üë•",
            "–¢–≤–æ—Ä—á—ñ—Å—Ç—å —Ä–æ–∑–∫—Ä–∏—î—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é! üé®",
            "–§—ñ–Ω–∞–Ω—Å–æ–≤–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á—á—è –±–ª–∏–∑—å–∫–æ! üí∞",
            "–ó–Ω–∞–π–¥–µ—à —Å–ø–æ–∫—ñ–π —Å–µ—Ä–µ–¥ —Ö–∞–æ—Å—É! ‚òÆÔ∏è",
            "–ù–æ–≤–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–æ –∑'—è–≤–∏—Ç—å—Å—è! üöÄ",
            "–î–æ–±—Ä–æ—Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ—Ç—å—Å—è –ø–æ–¥–≤—ñ–π–Ω–æ! ‚ù§Ô∏è",
            "–í—ñ–¥–∫—Ä–∏—Ç—Ç—è –∑–º—ñ–Ω–∏—Ç—å —Ç–≤—ñ–π —Å–≤—ñ—Ç! üåç"
        ];
        
        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–∞—Å—Ç–∏–Ω–æ–∫
        function createParticles() {
            const container = document.getElementById('particles-container');
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('a-sphere');
                particle.setAttribute('radius', '0.03');
                particle.setAttribute('color', getRandomColor());
                particle.setAttribute('position', getRandomPosition(0.7));
                particle.setAttribute('animation', {
                    property: 'position',
                    to: getRandomPosition(0.7),
                    dur: 2000 + Math.random() * 3000,
                    loop: true,
                    dir: 'alternate'
                });
                container.appendChild(particle);
            }
        }
        
        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—Ä–∏—Å—Ç–∞–ª—ñ–≤ –Ω–∞–≤–∫–æ–ª–æ
        function createCrystals() {
            const container = document.getElementById('crystals-container');
            const positions = [
                {x: 0.8, y: -0.3, z: 0},
                {x: -0.8, y: -0.3, z: 0},
                {x: 0, y: -0.3, z: 0.8},
                {x: 0, y: -0.3, z: -0.8},
                {x: 0.6, y: -0.3, z: 0.6},
                {x: -0.6, y: -0.3, z: -0.6}
            ];
            
            positions.forEach(pos => {
                const crystal = document.createElement('a-cone');
                crystal.setAttribute('radius-bottom', '0.05');
                crystal.setAttribute('radius-top', '0.01');
                crystal.setAttribute('height', '0.2');
                crystal.setAttribute('color', getRandomCrystalColor());
                crystal.setAttribute('position', pos);
                crystal.setAttribute('rotation', '0 0 0');
                crystal.setAttribute('animation', {
                    property: 'rotation',
                    to: '0 360 0',
                    dur: 4000 + Math.random() * 4000,
                    loop: true
                });
                container.appendChild(crystal);
            });
        }
        
        // –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
        function getRandomColor() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function getRandomCrystalColor() {
            const colors = ['#ffd700', '#c0c0c0', '#b9f2ff', '#ff69b4', '#98fb98'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function getRandomPosition(radius) {
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            const x = radius * Math.sin(phi) * Math.cos(theta);
            const y = radius * Math.sin(phi) * Math.sin(theta);
            const z = radius * Math.cos(phi);
            return `${x} ${y} ${z}`;
        }
        
        function getRandomProphecy() {
            return prophecies[Math.floor(Math.random() * prophecies.length)];
        }
        
        // –û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –Ω–∞ –∫—É–ª—é
        document.addEventListener('DOMContentLoaded', function() {
            const magicBall = document.getElementById('magicBall');
            const prophecyElement = document.getElementById('prophecy');
            const prophecyText = document.getElementById('prophecyText');
            
            createParticles();
            createCrystals();
            
            magicBall.addEventListener('click', function() {
                // –ê–Ω—ñ–º–∞—Ü—ñ—è –∫—É–ª—ñ
                magicBall.setAttribute('animation', {
                    property: 'scale',
                    from: '1 1 1',
                    to: '1.2 1.2 1.2',
                    dur: 300,
                    loop: 2,
                    dir: 'alternate'
                });
                
                // –ó–º—ñ–Ω–∞ –∫–æ–ª—å–æ—Ä—É
                magicBall.setAttribute('color', '#4a148c');
                
                // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞
                const prophecy = getRandomProphecy();
                prophecyElement.setAttribute('value', prophecy);
                
                // –ü–æ–∫–∞–∑ —Ç–µ–∫—Å—Ç—É –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
                prophecyText.textContent = prophecy;
                prophecyText.style.display = 'block';
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    prophecyText.style.display = 'none';
                    magicBall.setAttribute('color', '#1a1a2e');
                }, 5000);
            });
        });
        
        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞
        function downloadMarker() {
            // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞
            const link = document.createElement('a');
            link.href = 'https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png';
            link.download = 'magic-ball-marker.png';
            link.click();
        }
    </script>
</body>
</html>
